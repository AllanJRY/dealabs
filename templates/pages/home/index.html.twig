{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
    {# {% include('partials/component/carousel/carousel-category.html.twig') %} #}
    {% include('partials/component/filter-navbar.html.twig') %}
    <div class="container-fluid bg-secondary">
        <div class="container">
            <div class="row">
                <div class="col-lg-9 col-12">
                    {% for deal in deals %}
                        <div class="card mt-3 mb-3">
                            <div class="card-horizontal">
                                <div class="col-4 m-3">
                                    <img src="http://via.placeholder.com/300x180" alt="">
                                </div>
                                <div class="card-body col-8">
                                    <div class="row justify-content-between ">
                                        <div class="col-8">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn text-primary">
                                                    <i class="fa fa-minus"></i>
                                                </button>
                                                <button type="button" class="btn text-danger fw-bold">
                                                    0°
                                                </button>
                                                <button type="button" class="btn text-danger">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <p class="col-4 text-muted text-right align-items-center m-0 align-items-center">
                                            {% set time = date(deal.createdAt).diff(date('now')) %}
                                            <span><i class="fas fa-fire-alt"></i>
                                                {% if time.d > 0 %}
                                                    {{ deal.createdAt|date('d M') }}
                                                {% elseif time.h > 0 and time.d == 0 and time.m == 0 %}
                                                    il y a {{ time.h }} h et {{ time.i }}
                                                {% elseif time.s > 0 and time.h == 0 and time.d == 0 and time.m == 0 %}
                                                    il y a {{ time.i }}
                                                {% endif %}
                                            </span>
                                        </p>
                                    </div>
                                    <h4 class="card-title fw-bold">{{ deal.title|capitalize }}</h4>
                                    <p>
                                        <span class="text-danger">0,0€</span>
                                        <span class="text-muted">| Bon plans</span>
                                        <span class="text-primary">Amazon</span>
                                    </p>
                                    <p class="card-text">{{ deal.description|length > 100 ? deal.description|slice(0, 100) ~ '...' : deal.description }}
                                        <a class="text-decoration-none text-dark fw-bold"
                                           href="#">Afficher plus</a></p>
                                    <div class="row justify-content-between align-items-center">
                                        <div class="col-lg-6 col-3">
                                            <p>{{ deal.author.username }}</p>
                                        </div>
                                        <div class="col-lg-6 col-9 row">
                                            <a class="btn text-dark text-decoration-none col-3 border-dark border-1 m-3"
                                               type="button"><i class="fas fa-comment"></i> 0</a>
                                            <a class="btn btn-primary col-6 m-3" type="button">Voir le deal <i
                                                        class="fas fa-external-link-square-alt"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-lg-3 col-12">
                <p>En construction</p>
            </div>
        </div>
    </div>
    </div>
{% endblock %}

